[TOC]

# 计算机网络

## 1.计算机网络入门

### 1.三种交换方式

**电路交换**

+ 电话交换机接通电话线的方式称为电路交换
+ 从通信资源分配的角度，**交换**就是按照某种分配方式动态的分配传输路线的资源
+ 电路交换三步骤：
    + 建立连接（分配通信资源）
    + 通话（传输数据）
    + 释放连接（归还通信资源）



**分组交换**

+ 分组交换的发送方将完整的数据进行拆分变成一个个包，并加上首部，通过路由器转发出去
+ 路由器，缓存分组，转发分组
+ 接收方，收集分组，去掉首部，并将分组重新拼合成完整的数据



**报文交换**

+ 将完整的数据层层转发直达终点



**三种交换方式的对比**

+ 电路交换
    + 电路交换首先要建立连接，连接建立后就是发送方和接收方直接进行数据交换
    + 通信过程中信道会一直占用，通信完成释放连接
    + 采用比特流直达终点的方式
+ 报文交换
    + 将报文不断进行存储转发
    + 要求中间节点缓存较大
+ 分组交换
    + 不需要建立连接，直接就将分组发送出去
    + 中间节点在发送分组的同时还可以接收缓存新到的分组
    + 效率较高



**三种方式优缺点**

+ 电路交换
    + 通信时延小，有序传输，没有冲突，控制简单
    + 建立连接时间长，线路独占，效率低，灵活性差
+ 报文交换
    + 无需建立连接，动态分配线路，提高可靠性和利用率
    + 引起转发时延，需要较大缓存，传输额外的信息量
+ 分组交换
    + 无需建立连接，线路利用率高，出错时重新发送的代价较小
    + 引起转发时延，需要传输额外的信息，存在丢失分组，失序，若采用虚电路交换则存在虚电路释放等问题



**分组交换的两种方式**

分组交换其实有两种实现方式：

+ 虚电路连接（弃用）
    + **虚电路建立连接**：虚电路的所有分组要通过的一系列链路与路由器，网络层也为沿着该路径的每条链路确定一个VC号，在沿着路径的每台路由器的转发表中增加一表项
    + **数据传送**:一旦创建了虚电路，分组就可以开始沿该虚电路流动了
    + **虚电路拆除**：当发送方(或接收方)通知网络层它想终止该虚电路时，就启动这个过程
+ 数据报网络
    + 在数据报网络中，每当一个端系统要发送分组时，它就为该分组加上目的地端系统的地 址，然后将该分组推进网络中



**虚电路和数据报网络的由来**

+ 虚电路的概念来源于电话领域，它采用了真正的电路，使用VC号转发分组。

+ 因特网作为一种数据报网络，是由互连计算机的需求发展而来的，使用IP地址转发分组



### 2.计算机网络的定义

计算机网络主要由一些**通用的，可编程的硬件互联而成的**，这些硬并非专门用来实现某一目的（传送数据）。这些硬件能够用来传送多种不同的数据，**并支持广泛的和日益增长的应用**



### 3.计算机网络的分类

**根据交换技术**

+ 电路交换网络
+ 报文交换网络
+ 分组交换网络



**根据传输介质**

+ 有线网络
+ 无线网络



**根据范围覆盖**

+ WAN 广域网
+ LAN 局域网
+ PAN 个域网



### 4.计算机网络性能指标

**计算机中数据量的单位**

计算机中数据量的单位有两种

+ bit：比特，缩写b，1kb = 10^3^b = 1000b
+ Byte：字节，缩写B，1KB = 2^10^B = 1024B
+ 1 Byte = 8 bit



**速率**

连接在计算机网络上的主机在数字信道中的比特传输速率，也称**比特率，数据率**

+ bit/s(b/s, bps)
+ kb/s = 10^3^b/s



**带宽**

带宽在不同的系统中有不同的意义

+ 在模拟信号系统中：代表信号所包含的不同频率的频率范围
+ 在计算机网络中：代表网络通信线路的通信能力，因此网络带宽表示单位时间内从网络的某一点到另一点所能通过的最高数据率 



**吞吐量**

+ 吞吐量代表单位时间内通过某个信道的数据量
+ 吞吐量受带宽或者额定速率的限制



**时延**

时延一般分为以下三种

+ 发送时延：在发送方产生的时延，分组长度/发送速率
+ 传播时延：在信道中的产生的时延，信道长度/电磁波传送速率
+ 处理时延：一般不方便计算

在实际问题中，在忽略处理时延的前提下，我们需要对具体问题具体分析，**不能想当然的认为发送时延或者处理时延占主导**



**时延带宽积**

+ **传播时延**和**带宽**的乘积
+ 时延带宽积又称以**比特为单位的链路长度**



**往返时间RTT**

+ 双向交互一次所需的时间



**利用率**

+ 可以用简单的公式来表示当前时延*D*，网络空闲时延D~0~和利用率*U*之间的关系$D = \frac{D_0}{1-U}$
+ 从上面的公式可以看出，信道利用率越高时延越高，所以利用率并不是越高也好，一般不会超过50%



**丢包率**

+ 丢包率就是分组的丢失率，就是在传输过程中丢失的分组占总分组数量的比例
+ 分组丢失主要有两种情况
    + 分组在传输过程中发送误码，被节点丢弃
    + 节点缓存已满，新来的分组被丢弃



## 2.计算机网络体系结构

### 1.计算机网络体系结构

计算机网络在实际中进行了分层，**实际上**的计算机体系结构是*TCP/IP*体系结构，结构如下

![net](https://cdn.jsdelivr.net/gh/Aurora0201/ImageStore@main/img/upgit_20230320_1679290643.png)



### 2.计算机网络分层的必要性

**为什么要进行分层**

+ 计算机网络是个非常复杂的系统
+ **分层**可以将庞大而复杂的问题，转化为若干较小的局部问题，这些较小的问题便于进行研究和处理



**分层的必要性**

+ 物理层：解决何种信号来传输比特的问题
+ 数据链路层：解决分组在一个网络或者一段链路上的传输问题
+ 网络层：解决分组在多个网络上传输的问题
+ 运输层：解决进程之间基于网络的通信问题
+ 应用层：解决通过进程交互实现特定网络应用的问题



**分层处理方法**

+ 应用层：将**HTTP报文**交给运输层
+ 运输层：将HTTP报文加上TCP首部成为**TCP报文段**，并交付给网络层
+ 网络层：将TCP报文段加上IP首部成为**IP数据报**交付给数据链路层
+ 数据链路层：将IP数据报添加首部和尾部成为**帧**交付给物理层
+ 物理层：将帧添加前导码成为**比特流**并发送出去



### 3.计算机网络专用术语

**实体**

+ 任何可发送或接收信息的硬件或者软件进程
    + **对等实体**：收发双方中相同层次的实体



**协议**

+ 控制两个对等实体进行逻辑通信的规则的集合
    + **逻辑通信**：实际上并没有通信，只是为了方便研究
+ 在协议的控制下，两个对等实体间的逻辑通信使得本层能够向上一层提供服务
+ 要实现本层协议，还需要下一层提供的服务
+ 协议是**水平的**，服务是**垂直的**
+ 实体看得见相邻下层所提供的的服务但不知道实现该服务的具体协议，也就是说下层的协议对上层的实体来说是**透明的** 



**服务访问点**

+ 在同一系统中，**相邻两层的实体交换信息的逻辑接口**，用于区分不同的服务类型
    + 数据链路层：服务访问点为帧的**类型**字段
    + 网络层：服务访问点为IP数据报首部中**协议字段**
    + 运输层：服务访问点则为**端口号**



**服务原语**

+ 上层使用下层提供的服务必须通过与下层交换一些**命令**，这些命令称为**服务原语**



**协议数据单元PDU**

+ **对等层次之间传送的数据包**称为该层的协议数据单元



**服务数据单元SDU**

+ **同一系统内，层与层之间交换的数据包**称为服务数据单元



### 4.物理层

**传输方式**

+ 单工通信：单向通信
+ 半双工通信：双向交替通信，但不能同时运行
+ 全双工：双向交替通信，可以同时运行



### 5.数据链路层

**封装成帧**

+ 封装成帧是指数据链路层给**上层交付的协议数据单元**添加帧头和帧尾使之成为帧。帧头和帧尾中包含有重要的控制信息。
    + 帧头和帧尾的作用之一就是帧定界。
+ 透明传输是指数据链路层对**上层交付的传输数据没有任何限制**，就好像数据链路层不存在一样。
    + 面向字节的物理链路使用字节填充（或称字符填充)的方法实现透明传输。
    + 面向比特的物理链路使用比特填充的方法实现透明传输。



**差错检测**

+ 循环冗余校验CRC
    + 收发双方约定好生成多项式
    + 发送方基于待发送的数据和多项式计算出差错检测码，添加到数据后一起传输
    + 接收方通过生成多项式计算收到的数据是否产生了误码
    + 检测码只能检查是否发生了错误，无法定位错误的位置
